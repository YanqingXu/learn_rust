# Rust é¡¹ç›®è°ƒè¯•æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚
- **VS Code**: å®‰è£…æœ€æ–°ç‰ˆæœ¬
- **Rust æ‰©å±•**: å®‰è£… `rust-analyzer` æ‰©å±•
- **è°ƒè¯•å™¨**: å®‰è£… `CodeLLDB` æ‰©å±•ï¼ˆç”¨äºè°ƒè¯•ï¼‰
- **Rust å·¥å…·é“¾**: ç¡®ä¿å·²å®‰è£… `rustc`, `cargo`, `clippy`, `rustfmt`

### 2. è°ƒè¯•é…ç½®æ–‡ä»¶è¯´æ˜

#### `.vscode/launch.json` - è°ƒè¯•é…ç½®
åŒ…å«ä»¥ä¸‹é¢„é…ç½®çš„è°ƒè¯•é€‰é¡¹ï¼š
- ğŸ¦€ **Debug Main Program** - è°ƒè¯•ä¸»ç¨‹åº
- ğŸ§® **Debug Calculator** - è°ƒè¯•è®¡ç®—å™¨é¡¹ç›®
- ğŸ“¦ **Debug Variables** - è°ƒè¯•å˜é‡å­¦ä¹ æ¨¡å—
- ğŸ”§ **Debug Functions** - è°ƒè¯•å‡½æ•°å­¦ä¹ æ¨¡å—
- ğŸ  **Debug Ownership** - è°ƒè¯•æ‰€æœ‰æƒå­¦ä¹ æ¨¡å—
- ğŸ§ª **Debug Tests** - è°ƒè¯•æµ‹è¯•

#### `.vscode/tasks.json` - æ„å»ºä»»åŠ¡
åŒ…å«ä»¥ä¸‹ä»»åŠ¡ï¼š
- `rust: cargo build main` - æ„å»ºä¸»ç¨‹åº
- `rust: cargo run main` - è¿è¡Œä¸»ç¨‹åº
- `rust: cargo test main` - æµ‹è¯•ä¸»ç¨‹åº
- `rust: cargo check all` - æ£€æŸ¥æ‰€æœ‰ä»£ç 
- `rust: cargo clippy` - ä»£ç è´¨é‡æ£€æŸ¥

#### `.vscode/settings.json` - å·¥ä½œåŒºè®¾ç½®
é…ç½®äº†ï¼š
- Rust Analyzer è®¾ç½®
- ä»£ç æ ¼å¼åŒ–
- ç¼–è¾‘å™¨ä¼˜åŒ–
- è°ƒè¯•ç¯å¢ƒ

## ğŸ”§ å¦‚ä½•è°ƒè¯• main ç¨‹åº

### æ–¹æ³•1: ä½¿ç”¨è°ƒè¯•é¢æ¿
1. æ‰“å¼€ VS Code
2. æŒ‰ `Ctrl+Shift+D` æ‰“å¼€è°ƒè¯•é¢æ¿
3. åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© "ğŸ¦€ Debug Main Program"
4. ç‚¹å‡»ç»¿è‰²æ’­æ”¾æŒ‰é’®æˆ–æŒ‰ `F5` å¼€å§‹è°ƒè¯•

### æ–¹æ³•2: ä½¿ç”¨å¿«æ·é”®
1. æ‰“å¼€ `src/main.rs` æ–‡ä»¶
2. è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»è¡Œå·å·¦ä¾§æˆ–æŒ‰ `F9`ï¼‰
3. æŒ‰ `F5` å¼€å§‹è°ƒè¯•
4. ç¨‹åºä¼šåœ¨æ–­ç‚¹å¤„æš‚åœ

### æ–¹æ³•3: ä½¿ç”¨å‘½ä»¤é¢æ¿
1. æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
2. è¾“å…¥ "Debug: Start Debugging"
3. é€‰æ‹© "ğŸ¦€ Debug Main Program"

## ğŸ› ï¸ è°ƒè¯•åŠŸèƒ½è¯¦è§£

### æ–­ç‚¹è®¾ç½®
- **æ™®é€šæ–­ç‚¹**: ç‚¹å‡»è¡Œå·å·¦ä¾§
- **æ¡ä»¶æ–­ç‚¹**: å³é”®ç‚¹å‡»æ–­ç‚¹ â†’ "Edit Breakpoint" â†’ è®¾ç½®æ¡ä»¶
- **æ—¥å¿—æ–­ç‚¹**: å³é”®ç‚¹å‡»æ–­ç‚¹ â†’ "Edit Breakpoint" â†’ è®¾ç½®æ—¥å¿—æ¶ˆæ¯

### è°ƒè¯•æ§åˆ¶
- `F5` - ç»§ç»­æ‰§è¡Œ
- `F10` - å•æ­¥è·³è¿‡ï¼ˆStep Overï¼‰
- `F11` - å•æ­¥è¿›å…¥ï¼ˆStep Intoï¼‰
- `Shift+F11` - å•æ­¥è·³å‡ºï¼ˆStep Outï¼‰
- `Ctrl+Shift+F5` - é‡æ–°å¯åŠ¨è°ƒè¯•
- `Shift+F5` - åœæ­¢è°ƒè¯•

### è°ƒè¯•é¢æ¿åŠŸèƒ½
1. **å˜é‡çª—å£**: æŸ¥çœ‹å½“å‰ä½œç”¨åŸŸçš„å˜é‡å€¼
2. **ç›‘è§†çª—å£**: æ·»åŠ è‡ªå®šä¹‰è¡¨è¾¾å¼ç›‘è§†
3. **è°ƒç”¨å †æ ˆ**: æŸ¥çœ‹å‡½æ•°è°ƒç”¨é“¾
4. **æ–­ç‚¹çª—å£**: ç®¡ç†æ‰€æœ‰æ–­ç‚¹

## ğŸ“‹ è°ƒè¯•æœ€ä½³å®è·µ

### 1. è®¾ç½®ç¯å¢ƒå˜é‡
é¡¹ç›®å·²é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
- `RUST_LOG=debug` - å¯ç”¨è¯¦ç»†æ—¥å¿—
- `RUST_BACKTRACE=1` - æ˜¾ç¤ºé”™è¯¯å †æ ˆè·Ÿè¸ª

### 2. ä½¿ç”¨ println! è°ƒè¯•
```rust
// åŸºæœ¬è¾“å‡º
println!("å˜é‡å€¼: {}", variable);

// è°ƒè¯•æ ¼å¼è¾“å‡º
println!("è°ƒè¯•ä¿¡æ¯: {:?}", complex_variable);

// ç¾åŒ–è°ƒè¯•è¾“å‡º
println!("è¯¦ç»†è°ƒè¯•: {:#?}", complex_variable);
```

### 3. ä½¿ç”¨ dbg! å®
```rust
// å¿«é€Ÿè°ƒè¯•ï¼Œä¼šæ‰“å°å˜é‡åå’Œå€¼
let result = dbg!(some_calculation());

// è°ƒè¯•è¡¨è¾¾å¼
dbg!(x + y);
```

### 4. æ¡ä»¶ç¼–è¯‘è°ƒè¯•ä»£ç 
```rust
#[cfg(debug_assertions)]
println!("è¿™åªåœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œ");
```

## ğŸ§ª æµ‹è¯•è°ƒè¯•

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
cargo test test_function_name
```

### è°ƒè¯•æµ‹è¯•
1. åœ¨æµ‹è¯•å‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹
2. é€‰æ‹© "ğŸ§ª Debug Tests" é…ç½®
3. å¼€å§‹è°ƒè¯•

### æµ‹è¯•è¾“å‡º
```bash
# æ˜¾ç¤ºæµ‹è¯•è¾“å‡º
cargo test -- --nocapture

# æ˜¾ç¤ºè¢«å¿½ç•¥çš„æµ‹è¯•
cargo test -- --ignored
```

## ğŸ” æ€§èƒ½è°ƒè¯•

### ä½¿ç”¨ Criterion åŸºå‡†æµ‹è¯•
```bash
# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench

# ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
cargo bench -- --output-format html
```

### å†…å­˜ä½¿ç”¨åˆ†æ
```bash
# ä½¿ç”¨ Valgrindï¼ˆLinux/macOSï¼‰
valgrind --tool=memcheck cargo run --bin main

# ä½¿ç”¨ heaptrackï¼ˆLinuxï¼‰
heaptrack cargo run --bin main
```

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. è°ƒè¯•å™¨æ— æ³•å¯åŠ¨
- ç¡®ä¿å®‰è£…äº† CodeLLDB æ‰©å±•
- æ£€æŸ¥ Rust å·¥å…·é“¾æ˜¯å¦æ­£ç¡®å®‰è£…
- é‡å¯ VS Code

### 2. æ–­ç‚¹ä¸ç”Ÿæ•ˆ
- ç¡®ä¿åœ¨ Debug æ¨¡å¼ä¸‹ç¼–è¯‘ï¼ˆé»˜è®¤ `cargo build`ï¼‰
- æ£€æŸ¥ä»£ç æ˜¯å¦è¢«ä¼˜åŒ–æ‰
- ç¡®ä¿æ–­ç‚¹è®¾ç½®åœ¨å¯æ‰§è¡Œçš„ä»£ç è¡Œ

### 3. å˜é‡å€¼æ˜¾ç¤º "optimized out"
- åœ¨ `Cargo.toml` ä¸­æ·»åŠ è°ƒè¯•é…ç½®ï¼š
```toml
[profile.dev]
opt-level = 0
debug = true
```

### 4. è°ƒè¯•ä¿¡æ¯ä¸å®Œæ•´
- ç¡®ä¿ç¼–è¯‘æ—¶åŒ…å«è°ƒè¯•ä¿¡æ¯ï¼š
```bash
cargo build --bin main
```

## ğŸ“š å­¦ä¹ å»ºè®®

### è°ƒè¯•å­¦ä¹ è·¯å¾„
1. **åŸºç¡€è°ƒè¯•**: ä» `variables.rs` å¼€å§‹ï¼Œå­¦ä¹ åŸºæœ¬çš„æ–­ç‚¹å’Œå˜é‡æŸ¥çœ‹
2. **å‡½æ•°è°ƒè¯•**: åœ¨ `functions.rs` ä¸­ç»ƒä¹ å•æ­¥è°ƒè¯•å’Œè°ƒç”¨å †æ ˆ
3. **æ‰€æœ‰æƒè°ƒè¯•**: åœ¨ `ownership.rs` ä¸­è§‚å¯Ÿæ‰€æœ‰æƒè½¬ç§»
4. **é¡¹ç›®è°ƒè¯•**: åœ¨ `calculator.rs` ä¸­è¿›è¡Œå¤æ‚é€»è¾‘è°ƒè¯•

### è°ƒè¯•æŠ€å·§
- ä»ç®€å•çš„ `println!` å¼€å§‹
- é€æ­¥å­¦ä¹ ä½¿ç”¨æ–­ç‚¹
- ç»ƒä¹ æŸ¥çœ‹å˜é‡å’Œè¡¨è¾¾å¼
- å­¦ä¹ åˆ†æè°ƒç”¨å †æ ˆ
- æŒæ¡æ¡ä»¶æ–­ç‚¹çš„ä½¿ç”¨

## ğŸ”— ç›¸å…³èµ„æº

- [Rust å®˜æ–¹è°ƒè¯•æŒ‡å—](https://doc.rust-lang.org/book/ch09-00-error-handling.html)
- [VS Code Rust æ‰©å±•æ–‡æ¡£](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer)
- [CodeLLDB è°ƒè¯•å™¨æ–‡æ¡£](https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb)
- [Cargo å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/cargo/)

---

ğŸ’¡ **æç¤º**: è°ƒè¯•æ˜¯å­¦ä¹  Rust çš„é‡è¦æŠ€èƒ½ï¼Œå¤šç»ƒä¹ ä½¿ç”¨è¿™äº›å·¥å…·å°†å¤§å¤§æé«˜ä½ çš„å¼€å‘æ•ˆç‡ï¼